@model IEnumerable<DoAnCoSo.Models.tbCuocThi>


<h1 class="text-center">LỊCH THI CỦA QUẢ BÀI THI MOS</h1>


<p >
    <a asp-action="Create"  >Create New</a>
</p>
<style>
    .text-center{
        text-align: center !important;
    }
    td {
        height: 40px;
    }
    thead{
        background-color: #cfe2ff;
    }

    .dropdown-menu {
        display: none; /* Ẩn dropdown menu ban đầu */
    }

    #sort-box{
        float: right;
        margin-right: 151px;
        line-height: 45px;
        height: 30px;
        margin-bottom: 20px;
        width: 150px;
        cursor: pointer;
        border-radius: 4px;
        padding: 6px 10px 6px 8px;
    }
</style>
   
<select id="sort-box">
    <option value="all">Tất cả cuộc thi</option>
    <option value="upcoming">Cuộc thi sắp tới</option>
    <option value="past">Cuộc thi đã qua</option>
</select>

<div style="clear: both;"></div>


<table id="cuocThiTable" class="table" 
                         border="1"
                         cellspacing="0"
                         cellpadding="10"
                         style="width: 80%;
                                margin: auto;
                                max-width: 90%;">
    <thead>
        <tr class="text-center">
            <th>Ngày Thi/Giờ Thi</th>
            <th>Số Lượng</th>
            <th>Địa Điểm</th>
            <th>Môn Thi</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model) {
            <tr class="text-center @((DateTime.Now > item.NgayThi) ? "past" : (DateTime.Now.AddDays(1) > item.NgayThi) ? "upcoming" : "all")">
            <td>
                @Html.DisplayFor(modelItem => item.NgayThi)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SoLuongThiSinh)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DiaDiem)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MonThi.TenMonThi)
            </td>
            <td>
                <a asp-action="Edit" asp-route-id="@item.Id">Edit</a> |
                <a asp-action="Details" asp-route-id="@item.Id">Read</a> |
                <a asp-action="Delete" asp-route-id="@item.Id">Delete</a>
            </td>
        </tr>
}
    </tbody>
</table>


@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const sortBox = document.getElementById("sort-box");
            const cuocThiTable = document.getElementById("cuocThiTable");

            sortBox.addEventListener("change", function () {
                const selectedOption = sortBox.value;
                const rows = cuocThiTable.querySelectorAll("tbody tr");

                rows.forEach(row => {
                    switch (selectedOption) {
                        case "all":
                            row.style.display = "table-row";
                            break;
                        case "past":
                            if (!row.classList.contains("past")) {
                                row.style.display = "none";
                            } else {
                                row.style.display = "table-row";
                            }
                            break;
                        case "upcoming":
                            if (!row.classList.contains("upcoming")) {
                                row.style.display = "none";
                            } else {
                                row.style.display = "table-row";
                            }
                            break;
                        // case "ascending":
                        //     // Lấy tất cả các hàng và chuyển thành mảng để sắp xếp
                        //     const rowsArray = Array.from(rows);
                        //     rowsArray.sort((a, b) => {
                        //         const dateA = new Date(a.cells[0].innerText);
                        //         const dateB = new Date(b.cells[0].innerText);
                        //         return dateA - dateB;
                        //     });

                        //     // Xóa tất cả các hàng hiện tại
                        //     cuocThiTable.querySelector("tbody").innerHTML = "";

                        //     // Thêm lại các hàng đã sắp xếp
                        //     rowsArray.forEach(row => {
                        //         cuocThiTable.querySelector("tbody").appendChild(row);
                        //     });
                        //     break;
                    }
                });
            });
        });


    </script>
}