 @using DoAnCoSo.Models
@model DoAnCoSo.Models.tbCuocThi

@{
    ApplicationDbContext context = new ApplicationDbContext();
    var ListQuyDinh = from c in context.tbChiTietQuyDinh
                      where c.CuocThiId == Model.Id
                      select c;
    List<tbChiTietQuyDinh> listQuyDinh = ListQuyDinh.ToList();

    var ListNoiDung = from c in context.tbChiTietNoiDung
                      where c.CuocThiId == Model.Id
                      select c;
    List<tbChiTietNoiDung> listNoiDung = ListNoiDung.ToList();

    string LayTenLoaiTruong(int? loaiTruongId)
    {
        var tenLoaiTruong = context.tbLoaiTruong.FirstOrDefault(p => p.Id == loaiTruongId);
        if (tenLoaiTruong == null)
            return "";
        return tenLoaiTruong.TenLoaiTruong;
    }
}

<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        main {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .competition-info {
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
            justify-content: center;
        }

        .col-sm-2 {
            flex: 0 0 16.6667%;
            margin-right: 15px;
            margin-left: 15px;
        }

        .col-sm-10 {
            flex: 0 0 83.3333%;
            margin-right: 15px;
            margin-left: 15px;
        }

        .dt {
            font-weight: bold;
        }

        p {
            margin: 0;
            margin-bottom: 10px;
        }

        .details {
            margin-bottom: 20px;
        }

            .details dt {
                font-weight: bold;
            }

            .details dd {
                margin-left: 0;
                margin-bottom: 10px;
            }

        .button-container {
            text-align: center;
        }

            .button-container button {
                background-color: #007bff;
                color: #fff;
                padding: 10px 20px;
                text-decoration: none;
                border-radius: 5px;
                margin-right: 10px;
                cursor: pointer;
                border: none;
                transition: background-color 0.3s ease;
            }

                .button-container button:hover {
                    background-color: #0056b3;
                }

        .btn-dangky {
            text-decoration: none;
            color: #fff;
        }
    </style>
</head>
<body>
    <main>
        <div class="competition-info">
            <h1>Cuộc Thi @Html.DisplayFor(model => model.TenCuocThi)</h1>
            <dl class="row">
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Ngày Thi</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.NgayThi)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Số Lượng Thí Sinh</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.SoLuongThiSinh)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Địa Điểm</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.DiaDiem)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Môn Thi</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.MonThi.TenMonThi)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Cấp học</dt>
                    <dd class="col-sm-10">@LayTenLoaiTruong(Model.LoaiTruongId)</dd>
                </div>
            </dl>
        </div>

        <div class="button-container">
            <button id="showQuyDinhBtn">Quy định</button>
            <button id="showNoiDungBtn">Nội dung</button>
            <button>
                <a class="btn-dangky" asp-controller="PhieuDangKies" asp-action="Create" asp-route-cuocThiId="@Model.Id">Đăng ký thi</a>
            </button>
        </div>

        <div class="container-qdnd">
            <div id="quyDinhContainer" style="display: none;">
                <h2>Danh sách Quy định</h2>
                @foreach (var qd in listQuyDinh)
                {
                    var qd1 = context.tbQuyDinh.FirstOrDefault(p => p.Id == qd.QuyDinhId);
                    <div class="listQuyDinh">
                        <h3>@qd1.TenQuyDinh</h3>
                        <p>@qd1.NoiDungQuyDinh</p>
                    </div>
                }
            </div>

            <div id="noiDungContainer" style="display: none;">
                <h2>Danh sách nội dung</h2>
                @foreach (var nd in listNoiDung)
                {
                    var nd1 = context.tbNoiDung.FirstOrDefault(p => p.Id == nd.NoiDungId);
                    <div class="listNoiDung">
                        <h3>@nd1.TenNoiDung</h3>
                        <p>@nd1.NoiDungThi</p>
                    </div>
                }
            </div>
        </div>
    </main>
</body>

<script>
    document.getElementById("showQuyDinhBtn").addEventListener("click", function () {
        var quyDinh = document.getElementById("quyDinhContainer");
        if (quyDinh.style.display === "none")
            quyDinh.style.display = "block";
        else
            quyDinh.style.display = "none";
    });

    document.getElementById("showNoiDungBtn").addEventListener("click", function () {
        var noiDung = document.getElementById("noiDungContainer");
        if (noiDung.style.display === "none")
            noiDung.style.display = "block";
        else
            noiDung.style.display = "none";
    });
</script>


