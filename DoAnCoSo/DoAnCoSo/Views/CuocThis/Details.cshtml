 @using DoAnCoSo.Models
@model DoAnCoSo.Models.tbCuocThi

@{
    ApplicationDbContext context = new ApplicationDbContext();
    var ListQuyDinh = from c in context.tbChiTietQuyDinh
                      where c.CuocThiId == Model.Id
                      select c;
    List<tbChiTietQuyDinh> listQuyDinh = ListQuyDinh.ToList();

    var ListNoiDung = from c in context.tbChiTietNoiDung
                      where c.CuocThiId == Model.Id
                      select c;
    List<tbChiTietNoiDung> listNoiDung = ListNoiDung.ToList();

    string LayTenLoaiTruong(int? loaiTruongId)
    {
        var tenLoaiTruong = context.tbLoaiTruong.FirstOrDefault(p => p.Id == loaiTruongId);
        if (tenLoaiTruong == null)
            return "";
        return tenLoaiTruong.TenLoaiTruong;
    }
}

<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        main {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .competition-info {
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
            justify-content: center;
        }

        .col-sm-2 {
            flex: 0 0 16.6667%;
            margin-right: 15px;
            margin-left: 15px;
        }

        .col-sm-10 {
            flex: 0 0 83.3333%;
            margin-right: 15px;
            margin-left: 15px;
        }

        .dt {
            font-weight: bold;
        }

        p {
            margin: 0;
            margin-bottom: 10px;
        }

        .details {
            margin-bottom: 20px;
        }

            .details dt {
                font-weight: bold;
            }

            .details dd {
                margin-left: 0;
                margin-bottom: 10px;
            }

        .button-container {
            text-align: center;
        }

            .button-container button {
                background-color: #007bff;
                color: #fff;
                padding: 10px 20px;
                text-decoration: none;
                border-radius: 5px;
                margin-right: 10px;
                cursor: pointer;
                border: none;
                transition: background-color 0.3s ease;
            }

                .button-container button:hover {
                    background-color: #0056b3;
                }

        .btn-dangky {
            text-decoration: none;
            color: #fff;
        }

        .listQuyDinh, .listNoiDung {
            width: 100%;
            max-width: 95%; /* Giới hạn chiều rộng tối đa */
            padding: 20px;
            border: 0.1vw solid #000; /* Màu sắc đường viền */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Thêm bóng đổ */
            background-color: #fff; /* Màu nền */
            margin-bottom: 20px; /* Khoảng cách phía dưới */
            border-radius: 5px;
        }

        .navigationBtn {
            display: flex;
            justify-content: space-between; /* Căn giữa các nút */
            margin-top: 20px; /* Khoảng cách với phần trước đó */
        }

            .navigationBtn i {
                font-size: 30px;
                color: #007bff; /* Màu của các nút */
                cursor: pointer;
                transition: color 0.3s ease; /* Hiệu ứng chuyển đổi màu khi di chuột qua */
            }

                .navigationBtn i:hover {
                    color: #0056b3; /* Màu của các nút khi di chuột qua */
                }
    </style>
</head>
<body>
    <main>
        <div class="competition-info">
            <h1>Cuộc Thi @Html.DisplayFor(model => model.TenCuocThi)</h1>
            <dl class="row">
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Ngày Thi</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.NgayThi)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Số Lượng Thí Sinh</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.SoLuongThiSinh)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Địa Điểm</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.DiaDiem)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Môn Thi</dt>
                    <dd class="col-sm-10">@Html.DisplayFor(model => model.MonThi.TenMonThi)</dd>
                </div>
                <div class="col-sm-12">
                    <dt class="col-sm-2 dt">Cấp học</dt>
                    <dd class="col-sm-10">@LayTenLoaiTruong(Model.LoaiTruongId)</dd>
                </div>
            </dl>
        </div>

        <div class="button-container">
            <button id="showQuyDinhBtn">Quy định</button>
            <button id="showNoiDungBtn">Nội dung</button>
            <button>
                <a class="btn-dangky" asp-controller="PhieuDangKies" asp-action="Create" asp-route-cuocThiId="@Model.Id">Đăng ký thi</a>
            </button>
        </div>

        <div class="container-qdnd">
            <div id="quyDinhContainer" style="display: none;">
                <h2>Danh sách Quy định</h2>
                <div class="quyDinhPages">
                    <div class="navigationBtn">
                        @* button chuyen doi trang  *@
                        <i class='fas fa-arrow-circle-left' id="prevBtnQuyDinh"></i>
                        <i class='fas fa-arrow-circle-right' id="nextBtnQuyDinh"></i>

                    </div>
                    @foreach (var qd in listQuyDinh)
                    {
                        var qd1 = context.tbQuyDinh.FirstOrDefault(p => p.Id == qd.QuyDinhId);
                        <div class="listQuyDinh" style="display: none;">
                            <h3>@qd1.TenQuyDinh</h3>
                            <div>
                                @Html.Raw(qd1.NoiDungQuyDinh)
                            </div>
                        </div>
                    }
                </div>
            </div>

            <div id="noiDungContainer" style="display: none;">
                <h2>Danh sách nội dung</h2>
                <div class="noiDungPages">
                    <div class="navigationBtn">
                        @* button chuyen doi trang  *@
                        <i class='fas fa-arrow-circle-left' id="prevBtnNoiDung"></i>
                        <i class='fas fa-arrow-circle-right' id="nextBtnNoiDung"></i>
                    </div>
                    @foreach (var nd in listNoiDung)
                    {
                        var nd1 = context.tbNoiDung.FirstOrDefault(p => p.Id == nd.NoiDungId);
                        <div class="listNoiDung" style="display: none;">
                            <h3>@nd1.TenNoiDung</h3>
                            <div>
                                @Html.Raw(nd1.NoiDungThi)
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </main>
</body>

<script>
    document.getElementById("showQuyDinhBtn").addEventListener("click", function () {
        var quyDinh = document.getElementById("quyDinhContainer");
        var noiDung = document.getElementById("noiDungContainer");

        if (quyDinh.style.display === "none") {
            quyDinh.style.display = "block";
            noiDung.style.display = "none";
        } else {
            quyDinh.style.display = "none";
        }
    });

    document.getElementById("showNoiDungBtn").addEventListener("click", function () {
        var quyDinh = document.getElementById("quyDinhContainer");
        var noiDung = document.getElementById("noiDungContainer");

        if (noiDung.style.display === "none") {
            noiDung.style.display = "block";
            quyDinh.style.display = "none";
        } else {
            noiDung.style.display = "none";
        }
    });


    // JS chuyen trang
    var currentPageIndexQuyDinh = 0;
    var currentPageIndexNoiDung = 0;
    var quyDinhPages = document.querySelectorAll("#quyDinhContainer .listQuyDinh");
    var noiDungPages = document.querySelectorAll("#noiDungContainer .listNoiDung");
    var totalPagesQuyDinh = quyDinhPages.length;
    var totalPagesNoiDung = noiDungPages.length;

    document.getElementById("nextBtnQuyDinh").addEventListener("click", function () {
        quyDinhPages[currentPageIndexQuyDinh].style.display = "none";
        currentPageIndexQuyDinh = (currentPageIndexQuyDinh + 1) % totalPagesQuyDinh;
        quyDinhPages[currentPageIndexQuyDinh].style.display = "block";
    });

    document.getElementById("prevBtnQuyDinh").addEventListener("click", function () {
        quyDinhPages[currentPageIndexQuyDinh].style.display = "none";
        currentPageIndexQuyDinh = (currentPageIndexQuyDinh - 1 + totalPagesQuyDinh) % totalPagesQuyDinh;
        quyDinhPages[currentPageIndexQuyDinh].style.display = "block";
    });
</script>


